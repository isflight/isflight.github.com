YUI.add("transition",function(t,n){var e,i,o,r,s,a,u="",d="",l=t.config.doc,_="documentElement",f=l[_].style,p="transition",c="transitionProperty",h={},y=["Webkit","Moz"],g={Webkit:"webkitTransitionEnd"},v=function(){this.init.apply(this,arguments)};v._TRANSFORM="transform",v._toCamel=function(t){return t=t.replace(/-([a-z])/gi,function(t,n){return n.toUpperCase()})},v._toHyphen=function(t){return t=t.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g,function(t,n,e,i){var o=(n?"-"+n.toLowerCase():"")+e;return i&&(o+="-"+i.toLowerCase()),o})},v.SHOW_TRANSITION="fadeIn",v.HIDE_TRANSITION="fadeOut",v.useNative=!1,"transition"in f&&"transitionProperty"in f&&"transitionDuration"in f&&"transitionTimingFunction"in f&&"transitionDelay"in f?(v.useNative=!0,v.supported=!0):t.Array.each(y,function(t){var n=t+"Transition";n in l[_].style&&(u=t,d=v._toHyphen(t)+"-",v.useNative=!0,v.supported=!0,v._VENDOR_PREFIX=t)}),"undefined"==typeof f.transform&&t.Array.each(y,function(t){var n=t+"Transform";"undefined"!=typeof f[n]&&(v._TRANSFORM=n)}),u&&(p=u+"Transition",c=u+"TransitionProperty"),e=d+"transition-property",i=d+"transition-duration",o=d+"transition-timing-function",r=d+"transition-delay",s="transitionend",a="on"+u.toLowerCase()+"transitionend",s=g[u]||s,v.fx={},v.toggles={},v._hasEnd={},v._reKeywords=/^(?:node|duration|iterations|easing|delay|on|onstart|onend)$/i,t.Node.DOM_EVENTS[s]=1,v.NAME="transition",v.DEFAULT_EASING="ease",v.DEFAULT_DURATION=.5,v.DEFAULT_DELAY=0,v._nodeAttrs={},v.prototype={constructor:v,init:function(t,n){var e=this;return e._node=t,!e._running&&n&&(e._config=n,t._transition=e,e._duration="duration"in n?n.duration:e.constructor.DEFAULT_DURATION,e._delay="delay"in n?n.delay:e.constructor.DEFAULT_DELAY,e._easing=n.easing||e.constructor.DEFAULT_EASING,e._count=0,e._running=!1),e},addProperty:function(n,e){var i,o,r,s,a,u=this,d=this._node,l=t.stamp(d),_=t.one(d),f=v._nodeAttrs[l];f||(f=v._nodeAttrs[l]={}),s=f[n],e&&void 0!==e.value?a=e.value:void 0!==e&&(a=e,e=h),"function"==typeof a&&(a=a.call(_,_)),s&&s.transition&&s.transition!==u&&s.transition._count--,u._count++,r=("undefined"!=typeof e.duration?e.duration:u._duration)||1e-4,f[n]={value:a,duration:r,delay:"undefined"!=typeof e.delay?e.delay:u._delay,easing:e.easing||u._easing,transition:u},i=t.DOM.getComputedStyle(d,n),o="string"==typeof a?i:parseFloat(i),v.useNative&&o===a&&setTimeout(function(){u._onNativeEnd.call(d,{propertyName:n,elapsedTime:r})},1e3*r)},removeProperty:function(n){var e=this,i=v._nodeAttrs[t.stamp(e._node)];i&&i[n]&&(delete i[n],e._count--)},initAttrs:function(n){var e,i=this._node;n.transform&&!n[v._TRANSFORM]&&(n[v._TRANSFORM]=n.transform,delete n.transform);for(e in n)n.hasOwnProperty(e)&&!v._reKeywords.test(e)&&(this.addProperty(e,n[e]),""===i.style[e]&&t.DOM.setStyle(i,e,t.DOM.getComputedStyle(i,e)))},run:function(n){var e=this,i=e._node,o=e._config,r={type:"transition:start",config:o};return e._running||(e._running=!0,o.on&&o.on.start&&o.on.start.call(t.one(i),r),e.initAttrs(e._config),e._callback=n,e._start()),e},_start:function(){this._runNative()},_prepDur:function(t){return t=1e3*parseFloat(t),t+"ms"},_runNative:function(){var n,a,u,d=this,l=d._node,_=t.stamp(l),f=l.style,p=l.ownerDocument.defaultView.getComputedStyle(l),c=v._nodeAttrs[_],h="",y=p[v._toCamel(e)],g=e+": ",m=i+": ",N=o+": ",T=r+": ";"all"!==y&&(g+=y+",",m+=p[v._toCamel(i)]+",",N+=p[v._toCamel(o)]+",",T+=p[v._toCamel(r)]+",");for(u in c)n=v._toHyphen(u),a=c[u],(a=c[u])&&a.transition===d&&(u in l.style?(m+=d._prepDur(a.duration)+",",T+=d._prepDur(a.delay)+",",N+=a.easing+",",g+=n+",",h+=n+": "+a.value+"; "):this.removeProperty(u));g=g.replace(/,$/,";"),m=m.replace(/,$/,";"),N=N.replace(/,$/,";"),T=T.replace(/,$/,";"),v._hasEnd[_]||(l.addEventListener(s,d._onNativeEnd,""),v._hasEnd[_]=!0),f.cssText+=g+m+N+T+h},_end:function(n){var e=this,i=e._node,o=e._callback,r=e._config,s={type:"transition:end",config:r,elapsedTime:n},a=t.one(i);e._running=!1,e._callback=null,i&&(r.on&&r.on.end?setTimeout(function(){r.on.end.call(a,s),o&&o.call(a,s)},1):o&&setTimeout(function(){o.call(a,s)},1))},_endNative:function(t){var n=this._node,i=n.ownerDocument.defaultView.getComputedStyle(n,"")[v._toCamel(e)];t=v._toHyphen(t),"string"==typeof i&&(i=i.replace(new RegExp("(?:^|,\\s)"+t+",?"),","),i=i.replace(/^,|,$/,""),n.style[p]=i)},_onNativeEnd:function(n){var e,i,o=this,r=t.stamp(o),s=n,a=v._toCamel(s.propertyName),u=s.elapsedTime,d=v._nodeAttrs[r],l=d[a],_=l?l.transition:null;_&&(_.removeProperty(a),_._endNative(a),i=_._config[a],e={type:"propertyEnd",propertyName:a,elapsedTime:u,config:i},i&&i.on&&i.on.end&&i.on.end.call(t.one(o),e),_._count<=0&&(_._end(u),o.style[c]=""))},destroy:function(){var t=this,n=t._node;n&&(n.removeEventListener(s,t._onNativeEnd,!1),t._node=null)}},t.Transition=v,t.TransitionNative=v,t.Node.prototype.transition=function(n,e,i){var o,r,s=v._nodeAttrs[t.stamp(this._node)],a=s?s.transition||null:null;if("string"==typeof n)if("function"==typeof e&&(i=e,e=null),o=v.fx[n],e&&"object"==typeof e){e=t.clone(e);for(r in o)o.hasOwnProperty(r)&&(r in e||(e[r]=o[r]))}else e=o;else i=e,e=n;return a&&!a._running?a.init(this,e):a=new v(this._node,e),a.run(i),this},t.Node.prototype.show=function(n,e,i){return this._show(),n&&t.Transition&&("string"!=typeof n&&!n.push&&("function"==typeof e&&(i=e,e=n),n=v.SHOW_TRANSITION),this.transition(n,e,i)),this},t.NodeList.prototype.show=function(n,e,i){for(var o,r=this._nodes,s=0;o=r[s++];)t.one(o).show(n,e,i);return this};var m=function(t,n,e){return function(){n&&n.call(t),e&&"function"==typeof e&&e.apply(t._node,arguments)}};t.Node.prototype.hide=function(n,e,i){return n&&t.Transition?("function"==typeof e&&(i=e,e=null),i=m(this,this._hide,i),"string"!=typeof n&&!n.push&&("function"==typeof e&&(i=e,e=n),n=v.HIDE_TRANSITION),this.transition(n,e,i)):this._hide(),this},t.NodeList.prototype.hide=function(n,e,i){for(var o,r=this._nodes,s=0;o=r[s++];)t.one(o).hide(n,e,i);return this},t.NodeList.prototype.transition=function(n,e,i){for(var o,r=this._nodes,s=this.size(),a=0,i=i===!0;o=r[a++];)s>a&&i?t.one(o).transition(n):t.one(o).transition(n,e);return this},t.Node.prototype.toggleView=function(n,e,i){return this._toggles=this._toggles||[],i=arguments[arguments.length-1],"string"!=typeof n?(e=n,void this._toggleView(e,i)):("function"==typeof e&&(e=void 0),"undefined"==typeof e&&n in this._toggles&&(e=!this._toggles[n]),e=e?1:0,e?this._show():i=m(this,this._hide,i),this._toggles[n]=e,this.transition(t.Transition.toggles[n][e],i),this)},t.NodeList.prototype.toggleView=function(n,e,i){for(var o,r=this._nodes,s=0;o=r[s++];)o=t.one(o),o.toggleView.apply(o,arguments);return this},t.mix(v.fx,{fadeOut:{opacity:0,duration:.5,easing:"ease-out"},fadeIn:{opacity:1,duration:.5,easing:"ease-in"},sizeOut:{height:0,width:0,duration:.75,easing:"ease-out"},sizeIn:{height:function(t){return t.get("scrollHeight")+"px"},width:function(t){return t.get("scrollWidth")+"px"},duration:.5,easing:"ease-in",on:{start:function(){var t=this.getStyle("overflow");"hidden"!==t&&(this.setStyle("overflow","hidden"),this._transitionOverflow=t)},end:function(){this._transitionOverflow&&(this.setStyle("overflow",this._transitionOverflow),delete this._transitionOverflow)}}}}),t.mix(v.toggles,{size:["sizeOut","sizeIn"],fade:["fadeOut","fadeIn"]})},"3.16.0",{requires:["node-style"]});
;M.add("www-tips",function(e){var t=e.Node,n=e.UA.ie,s=e.mt.util,i=s.Cookie;e.mt.www.SysMsg={show:function(n,s){var i,o,a,c,r=e.all(".sysmsgw");r.size()?i=r.item(0):(i=t.create('<div class="sysmsgw common-tip"><div class="sysmsg"><span class="J-msg-content"></span><span class="close common-close">关闭</span></div></div>'),c=e.one("#hdw")||e.one("#site-mast"),c.insert(i,"after")),o=i.one(".J-tip-status"),o&&o.remove(!0),o=t.create('<span class="J-tip-status tip-status"></span>'),o.addClass("tip-status--"+n),a=i.one(".J-msg-content, p"),a.setHTML(s),i.set("id","sysmsg-"+n),a.prepend(o),this.initEvent()},remove:function(t){var n=e.all(".sysmsgw");n.size()&&(t?n.remove(!0):n.item(0).remove(!0))},initEvent:function(){var t=e.one("#sysmsg-error, #sysmsg-success");t&&t.delegate("click",function(){t.remove(!0)},".close")},init:function(t,o){if(t){var a,c="systip";a=t._node?t:e.Node.create(t),o=o&&e.one(o)||e.one("body"),o.prepend(a),e.Global.fire("PageHeight:change"),n&&8>n&&s.reflow(),a.delegate("click",function(){var e=s.decodeAttr(a,"params");if(e&&e.cookieClose){var t=i.getExpiresDate(15,0,0);i.set(c,!0,t,"/","."+M.DOMAIN_HOST)}a.remove(!0),6===n&&s.reflow()},".close")}}},e.mt.www.CommonTips={_isFirstMsg:!0,init:function(t,i,o){function a(t,n){var o;i=s.getEvalRes(n),0!==i.status&&i.msg?(o="<p>"+i.msg+"</p>",l.setAttribute("gaevent",i.gaevent)):m=!0,m?c.effect.fadeOut(!1,200,function(){e.Global.fire("PageHeight:change")}):c.effect.fadeOutSimple(!1,200,function(){u.show(c,o)})}if(t){var c;c=t._node?t:e.Node.create(t),o=o&&e.one(o)||e.one("body"),o.prepend(c),c.show(),e.Global.fire("PageHeight:change"),n&&8>n&&s.reflow();var r,l=c.one(".close"),d=s.decodeAttr(c,"commontips"),m=!1,u=this;c.plug(e.mt.plugin.Effect),c.delegate("click",function(){if(!(r&&r.isInProgress()||m)){var t={};i&&(i.type&&(t.type=i.type),i.msgid&&(t.msgid=i.msgid)),r=e.io("/index/commontips",{method:"POST",data:e.merge(d,t),on:{success:a}})}},".close")}},show:function(e,t){var i=e.one(".content");i.setHTML(t),e.effect.fadeInSimple("middle",function(){n&&8>n&&s.reflow()}),this.trackViewEvent(e)},trackViewEvent:function(e){var t="ga-params",n=e.all("[data-"+t+"]");n.each(function(e){var n=s.data(e,t).split("|");_gaq.push(["_trackEvent"].concat(n))})}},e.mt.www.VipBubble={success:function(t,n,s){var i=s.node,o=i.ancestor().insertBefore(n.markup,i);e.mt.www.VipBubble.bindBubbleEvents(o,n.cn)},bindBubbleEvents:function(e,t){e.show(),e.delegate("click",function(){e.hide(),i.set(t,!0,i.getExpiresDate(20,0,0),"/","."+M.DOMAIN_HOST)},".close")}},e.mt.www.MsgCenter={success:function(t,n,s){function i(){for(var e=["/deal/buy/","/order/check/","/order/return/"],t=document.location.pathname,n=0;n<e.length;n++)if(0===t.indexOf(e[n]))return!1;return!0}var o=s.node,a=e.one("#J-my-msg"),c=n.total;n.msglist&&(o.show(),o.appendChild(n.msglist),a.on("hover",function(){e.mt.www.MsgCenter.initScroll(e.one("#J-header-msg-list"))}),c>0&&i()&&a.one(".J-title").insert('<span class="J-msg-count msg-count">'+c+"</span>","after"))},bindMsgEvent:function(t,n,s,i){function o(t,n,s){n&&e.io(t,{method:"POST",data:{msgid:n.getData("mid")},on:{success:s}})}function a(t){var n=0,s=e.one("#J-my-msg .J-msg-count");t.hasClass("isread")||s&&(n=parseInt(s.get("innerHTML"),10),n--,n>0?s.setHTML(n):s.ancestor().remove(!0))}t=e.one(t),i=i||"nav",t&&(t.delegate("click",function(e){var t,s,c=e.target.hasClass("J-close");c||(t="a"===this.get("tagName").toLowerCase()?this.ancestor("li"):this,e.halt(),o("/message/read",t,function(){a(t),t.addClass("isread"),n&&n()}),s=this.getAttribute("href"),window._gaq.push(["_trackEvent","InnerLink","Click",i+"/drop/msgread/"+t.getData("mid")]),s?window.open(s,"_blank"):"J-header-msg-list"===t.ancestor("ul").get("id")&&window.open("/message/","_blank"))},"a, li"),t.delegate("click",function(){var e=this.ancestor("li");e.hide(200,null,function(){t.all("[data-mid]").some(function(e){return"none"!==e.getStyle("display")})||t.replace('<p class="no-msg">暂无新消息</p>'),o("/message/delete",e,function(){a(e)}),s&&s(),window._gaq.push(["_trackEvent","InnerLink","Click",i+"/drop/msgdel/"+e.getData("mid")])})},".J-close"),t.delegate("hover",function(){this.addClass("current")},function(){this.removeClass("current")},"li"))},initScroll:function(t){function n(){a=t.get("scrollHeight"),c=parseInt(t.get("clientHeight"),10),r=c-2*h,p=t.get("scrollTop"),l=r/a,c>=a?g.setStyles({height:"0px",top:h+"px",right:"2px"}):g.setStyles({height:l*c+"px",top:p*l+h+"px",right:"2px"})}function s(){t.on("hover",function(){m=o()},function(){m&&m.detach()})}function i(){return window.setTimeout(function(){g.setStyle("opacity","0")},w)}function o(){return t.on({mousewheel:function(e){e.halt(!0),d&&(window.clearTimeout(d),d=null),g.setStyle("opacity","0.5"),d=i(),(e.wheelDelta*v<=0||p>=0&&a-c>=p)&&(e.wheelDelta>0?(p-=f,v=1):(p+=f,v=-1)),0>p?p=0:p>=a-c&&(p=a-c),g.setStyle("opacity",.5),g.setStyle("top",p*l+h),t.set("scrollTop",p)}})}if(t){var a,c,r,l,d,m,u='<div class="scroll-bar"></div>',g=e.Node.create(u),p=0,f=20,w=2e3,h=10,v=0;if(window._gaq.push(["_trackEvent","InnerLink","Click","nav/drop/mymsg"]),t.next(".scroll-bar"))return g=t.next(".scroll-bar"),g.setStyle("opacity","0.5"),void i();t.ancestor().appendChild(g),this.bindMsgEvent(t,null,function(){n()}),window.setTimeout(function(){n(),d=i(),s()},200)}}},e.mt.www.Tips={success:function(t,n,s){var i=s.node,o=i.getData("parent");n.sysmsg?e.mt.www.SysMsg.init(n.sysmsg,o):n.commontips&&e.mt.www.CommonTips.init(n.commontips.html,n.commontips.info,o)}}},"1.0.0",{requires:["transition","www-base"]});
;