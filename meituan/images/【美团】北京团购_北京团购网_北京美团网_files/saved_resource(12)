M.add("floor-promotion",function(t){t.mt.www.floorpromotion={init:function(){var n=t.one(".J-hots-countdown"),e=t.one(".J-hots-deals .J-slider-container");this.initCountDown(n),this.initHotsSlider(e),t.Global.fire("PageHeight:change")},initCountDown:function(n){function e(){var t=new Date,n=t.getHours(),e=0,o=[[11,13],[18,20]];s=!1;for(var i=0;i<o.length;i++){var r=o[i][0],a=o[i][1];if(r>n){e=t.setHours(r,0,0);break}if(n>=r&&a>n){e=t.setHours(a,0,0),s=!0;break}}return e||(e=new Date(t.setDate(t.getDate()+1)),e.setHours(11,0,0)),e-Date.now()}function o(){return i?void i.reset(e()):void t.use("www-countdown",function(t){var o=function(t){return("0"+t).slice(-2).split("")},a=t.mt.www.Countdown;i=new a(e(),{start:function(){var t=this,e=n.all(".J-time");t.nlSlots=e,e&&(e.each(function(n,e){n.all("span").each(function(n,i){n.setHTML(o(t.time[e+1])[i])}).show()}),s?(r&&r.addClass("status--going"),n.replaceClass("countdown-begin","countdown-end").show()):(r&&r.addClass("status--coming"),n.replaceClass("countdown-end","countdown-begin").show()))},step:function(t,n){n&&this.nlSlots.item(n-1).all("span").each(function(n,e){n.setHTML(o(t)[e])}).show()},done:function(){i.reset(e()),i.tick()}}),i.tick()})}if(n){var i,s=!1,r=n.one(".J-countdown-status");o()}},initHotsSlider:function(n){if(n){var e=n.all(".deal-list--hots");if(!(e.size()<2)){var o=n.next(".pre-next").one(".mt-slider-previous"),i=n.next(".pre-next").one(".mt-slider-next");t.use("w-slider",function(){var e,s;e={srcNode:".J-hots-deals",effect:"slideHorizontal",duration:400,autoPlay:!0,lazyloading:!0,pnAutoHide:!0,sheetContainer:n,previous:o,next:i},s=new t.mt.widget.Slider(e),s.render();var r=n.next(".pre-next");r&&s.after("indexChange",function(){r.one(".J-slider-next-index").setHTML(this.get("index")+1)})})}}}},t.mt.ComponentHub.attach("floor-promotion",function(){t.mt.www.floorpromotion.init()})},"1.0.0",{requires:["mt-base"]});
;